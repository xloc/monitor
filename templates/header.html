<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My first sys project</title>

    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet"
          href="{{ url_for('static', filename='css/materialize.css') }}"
          media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>


    <script type="text/javascript"
            src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>

    <script type="text/javascript">
        setInterval(function () {
            getVars(updateImageAndInteger);
        }, 1000);

        function getVars(receivedCallback) {
            $.ajax({
                type: "GET",
                url: $SCRIPT_ROOT + '/get_vars',
                dataType: "json",
                success: receivedCallback,
                error: function (error) {
                    console.error('Error during GET')
                }
            });
        }

        function updateImageAndInteger(data) {
            $("#show-data").html(data.a);		//绑定数据
            $("#show-img").html(html =
                '<img src="data:image/jpg;base64,'
                + data.image + '">')
        }

    </script>

</head>

<body>

{% block body %}{% endblock %}


    <script type="text/javascript"
            src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript"
            src="{{ url_for('static', filename='js/materialize.js') }}"></script>
</body>
</html>